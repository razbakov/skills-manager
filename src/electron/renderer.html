<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Skills Manager</title>
  <link rel="stylesheet" href="./renderer.css" />
</head>

<body>
  <div class="backdrop"></div>
  <div class="app-shell">
    <header class="topbar">
      <div class="brand">
        <h1>Skills Manager</h1>
      </div>
      <nav class="tabs" aria-label="Skill views">
        <button class="tab active" data-tab="installed">
          <span>Installed</span>
          <span id="tab-count-installed" class="tab-count">0</span>
        </button>
        <button class="tab" data-tab="available">
          <span>Available</span>
          <span id="tab-count-available" class="tab-count">0</span>
        </button>
        <button class="tab" data-tab="sources">
          <span>Sources</span>
          <span id="tab-count-sources" class="tab-count">0</span>
        </button>
        <button class="tab" data-tab="recommendations">
          <span>Recommendations</span>
          <span id="tab-count-recommendations" class="tab-count">0</span>
        </button>
        <button class="tab" data-tab="settings">
          <span>Settings</span>
        </button>
      </nav>
      <div class="toolbar">
        <button id="update-button" class="secondary">Update</button>
        <button id="refresh-button" class="secondary">Refresh</button>
        <button id="export-button">Export</button>
        <button id="import-button" class="secondary">Import</button>
      </div>
    </header>

    <main class="views">
      <section id="installed-view" class="tab-view active">
        <aside class="panel list-panel">
          <div class="panel-heading">
            <label for="installed-search">Installed Skills</label>
            <span id="installed-list-count" class="list-count">0 shown</span>
          </div>
          <input id="installed-search" type="text" placeholder="Name, description, source path" />
          <div id="installed-list" class="item-list" role="listbox" aria-label="Installed skills"></div>
        </aside>
        <section class="panel detail-panel">
          <h2 id="installed-title">No installed skill selected</h2>
          <p id="installed-description" class="description">Pick a skill to manage enable, disable, or uninstall state.
          </p>
          <dl class="meta-grid">
            <dt>Source</dt>
            <dd id="installed-source">-</dd>
            <dt>Path</dt>
            <dd id="installed-path">-</dd>
            <div id="installed-ides-row">
              <dt>Installed in</dt>
              <dd id="installed-ides">-</dd>
            </div>
          </dl>
          <div class="actions">
            <button id="installed-open-path" class="secondary">Edit</button>
            <button id="installed-adopt" disabled>Adopt Skill</button>
            <button id="installed-toggle" class="warn" disabled>Disable Skill</button>
            <button id="installed-uninstall" class="danger" disabled>Uninstall</button>
          </div>
          <h3 class="subheading">SKILL.md Preview</h3>
          <pre id="installed-skill-md" class="markdown-preview">Select a skill to preview SKILL.md.</pre>
          <p class="hint">Keyboard: Ctrl/Cmd+1-5 switch tabs, / or Ctrl/Cmd+F focus search, arrows move, Enter triggers primary action.</p>
        </section>
      </section>

      <section id="available-view" class="tab-view">
        <aside class="panel list-panel">
          <div class="panel-heading">
            <label for="available-search">Available Skills</label>
            <span id="available-list-count" class="list-count">0 shown</span>
          </div>
          <input id="available-search" type="text" placeholder="Name, description, source path" />
          <div id="available-list" class="item-list" role="listbox" aria-label="Available skills"></div>
        </aside>
        <section class="panel detail-panel">
          <h2 id="available-title">No available skill selected</h2>
          <p id="available-description" class="description">Choose a skill to install it across configured targets.</p>
          <dl class="meta-grid">
            <dt>Source</dt>
            <dd id="available-source">-</dd>
            <dt>Path</dt>
            <dd id="available-path">-</dd>
          </dl>
          <div class="actions">
            <button id="available-open-path" class="secondary">Edit</button>
            <button id="available-install" disabled>Install Skill</button>
          </div>
          <h3 class="subheading">SKILL.md Preview</h3>
          <pre id="available-skill-md" class="markdown-preview">Select a skill to preview SKILL.md.</pre>
        </section>
      </section>

      <section id="sources-view" class="tab-view">
        <aside class="panel list-panel">
          <div class="panel-heading">
            <label>Source Packages</label>
            <span id="sources-list-count" class="list-count">0 total</span>
          </div>
          <div id="sources-list" class="item-list" role="listbox" aria-label="Sources"></div>
        </aside>
        <section class="panel detail-panel">
          <div class="source-add">
            <label for="source-url">GitHub Repository URL</label>
            <div class="source-add-row">
              <input id="source-url" type="text" placeholder="https://github.com/owner/repo" />
              <button id="source-add-button">Add Source</button>
            </div>
          </div>
          <h2 id="source-title">No source selected</h2>
          <p id="source-meta" class="description">Select a source package to inspect contained skills.</p>
          <div class="actions">
            <button id="source-open-path" class="secondary" disabled>Open Path</button>
            <button id="source-open-repo" class="secondary" disabled>Open Repo</button>
            <button id="source-disable" class="warn" disabled>Disable Source</button>
            <button id="source-remove" class="danger" disabled>Remove Source</button>
          </div>
          <h3 class="subheading">Skills in Source</h3>
          <div id="source-skills-list" class="item-list compact" role="listbox" aria-label="Source skills"></div>
          <h3 class="subheading">Suggested Sources</h3>
          <div id="sources-suggested-list" class="item-list compact" role="list" aria-label="Suggested sources"></div>
        </section>
      </section>

      <section id="recommendations-view" class="tab-view">
        <aside class="panel list-panel">
          <div class="panel-heading">
            <label>Recommendations</label>
            <span id="recommendation-list-count" class="list-count">0 generated</span>
          </div>
          <div class="recommendation-controls">
            <div class="control">
              <label for="recommendation-mode">Recommendation Mode</label>
              <select id="recommendation-mode">
                <option value="standard">Standard</option>
                <option value="explore-new">Explore New</option>
              </select>
            </div>
            <button id="recommendation-run-button" class="secondary">Generate</button>
          </div>
          <section id="recommendation-progress" class="recommendation-progress" aria-live="polite">
            <div class="recommendation-progress-top">
              <span id="recommendation-progress-stage">Idle</span>
              <span id="recommendation-progress-percent">0%</span>
            </div>
            <div class="recommendation-progress-track">
              <span id="recommendation-progress-bar" class="recommendation-progress-bar"></span>
            </div>
            <p id="recommendation-progress-message" class="description">Waiting for run.</p>
            <pre id="recommendation-progress-stats" class="recommendation-stats-preview">-</pre>
          </section>
          <div id="recommendation-list" class="item-list" role="listbox" aria-label="Recommendations"></div>
        </aside>
        <section class="panel detail-panel">
          <h2 id="recommendation-title">No recommendation selected</h2>
          <p id="recommendation-summary" class="description">Generate recommendations to see fit, confidence, and
            invocation hints.</p>
          <dl class="meta-grid">
            <dt>Usage</dt>
            <dd id="recommendation-usage">-</dd>
            <dt>Confidence</dt>
            <dd id="recommendation-confidence">-</dd>
            <dt>Evidence</dt>
            <dd id="recommendation-source">-</dd>
            <dt>Matches</dt>
            <dd id="recommendation-matches">-</dd>
          </dl>
          <div class="actions">
            <button id="recommendation-manage" class="secondary" disabled>Open Skill</button>
            <button id="recommendation-install" disabled>Install Skill</button>
          </div>
          <h3 class="subheading">Why this fit</h3>
          <p id="recommendation-reason" class="description">-</p>
          <h3 class="subheading">How to invoke</h3>
          <pre id="recommendation-trigger" class="markdown-preview">-</pre>
          <h3 class="subheading">Example from history</h3>
          <pre id="recommendation-example" class="markdown-preview">-</pre>
        </section>
      </section>

      <section id="settings-view" class="tab-view">
        <aside class="panel list-panel">
          <label>Settings</label>
          <div class="settings-groups" role="tablist" aria-label="Settings groups">
            <button
              id="settings-group-ides"
              class="settings-group-btn active"
              type="button"
              role="tab"
              aria-selected="true"
            >
              IDE Config
            </button>
            <button
              id="settings-group-personal"
              class="settings-group-btn"
              type="button"
              role="tab"
              aria-selected="false"
            >
              Personal Repo
            </button>
          </div>
          <label id="settings-list-label">Target IDEs</label>
          <div id="settings-list" class="item-list" role="listbox" aria-label="Settings targets"></div>
          <p id="settings-left-note" class="description settings-left-note">
            Enable or disable IDE targets for new symlink installs.
          </p>
        </aside>
        <section class="panel detail-panel">
          <section id="settings-ides-panel">
            <h2 id="settings-title">No target selected</h2>
            <p id="settings-description" class="description">Select a target IDE to learn more about its status.</p>
            <dl class="meta-grid">
              <dt>Status</dt>
              <dd id="settings-status">-</dd>
              <dt>Path</dt>
              <dd id="settings-path">-</dd>
            </dl>
            <div class="actions">
              <button id="settings-toggle" class="warn" disabled>Disable Target</button>
            </div>
            <h3 class="subheading">Note</h3>
            <p class="description">Turning off an IDE prevents new skills from being symlinked there.</p>
          </section>
          <section id="settings-personal-panel" style="display: none;">
            <h2>Personal Skills Repository</h2>
            <p class="description">
              Used when adopting unmanaged skills. Adopted skills are moved to
              <code>&lt;repo&gt;/skills</code> and committed automatically.
            </p>
            <div class="source-add">
              <label for="settings-personal-url">GitHub Repository URL</label>
              <div class="source-add-row">
                <input
                  id="settings-personal-url"
                  type="text"
                  placeholder="https://github.com/owner/repo"
                />
                <button id="settings-personal-set-url">Use Repo</button>
              </div>
            </div>
            <dl class="meta-grid">
              <dt>Status</dt>
              <dd id="settings-personal-status">Not configured</dd>
              <dt>Path</dt>
              <dd id="settings-personal-path">-</dd>
            </dl>
            <div class="actions">
              <button id="settings-personal-open" class="secondary" disabled>Open Path</button>
              <button id="settings-personal-clear" class="warn" disabled>Clear</button>
            </div>
            <h3 class="subheading">Note</h3>
            <p class="description">
              The URL is added to sources if needed. If already present, that source is reused.
            </p>
          </section>
        </section>
      </section>
    </main>

    <footer id="status-bar" class="status-bar">Ready.</footer>
  </div>

  <div id="import-modal" class="import-modal" aria-hidden="true">
    <section class="import-modal-panel" role="dialog" aria-modal="true" aria-labelledby="import-modal-title">
      <header class="import-modal-header">
        <h2 id="import-modal-title">Import Skills Preview</h2>
        <p id="import-modal-meta" class="description">Select skills to install from this bundle.</p>
      </header>
      <div class="actions import-modal-actions">
        <button id="import-select-all">Select All</button>
        <button id="import-select-none" class="secondary">Select None</button>
      </div>
      <div id="import-list" class="item-list import-list" role="list" aria-label="Skills in import bundle"></div>
      <div class="actions import-modal-actions">
        <button id="import-cancel" class="secondary">Cancel</button>
        <button id="import-confirm">Import Selected</button>
      </div>
    </section>
  </div>

  <script type="module" src="./renderer.js"></script>
</body>

</html>
