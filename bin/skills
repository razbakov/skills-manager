#!/usr/bin/env bash
set -euo pipefail

SOURCE_PATH="${BASH_SOURCE[0]}"
while [ -L "${SOURCE_PATH}" ]; do
  SOURCE_DIR="$(cd -P -- "$(dirname -- "${SOURCE_PATH}")" && pwd)"
  LINK_TARGET="$(readlink "${SOURCE_PATH}")"
  if [[ "${LINK_TARGET}" == /* ]]; then
    SOURCE_PATH="${LINK_TARGET}"
  else
    SOURCE_PATH="${SOURCE_DIR}/${LINK_TARGET}"
  fi
done

SCRIPT_DIR="$(cd -P -- "$(dirname -- "${SOURCE_PATH}")" && pwd)"
exec bun "${SCRIPT_DIR}/../src/index.ts" "$@"
